<html>

    <head>

        <meta charset="utf-8">
        <meta http-equiv='cache-control' content='no-cache'>
        <meta http-equiv='expires' content='0'>
        <meta http-equiv='pragma' content='no-cache'>

        <!-- LIBRARIES -->

        <!-- UIkit CSS -->
        <!--
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.17.8/dist/css/uikit.min.css" />
        -->

        <!-- UIkit JS -->
        <!--
        <script src="https://cdn.jsdelivr.net/npm/uikit@3.17.8/dist/js/uikit.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/uikit@3.17.8/dist/js/uikit-icons.min.js"></script>
        -->

        <!-- LIBRARIES ES6 -->
        <script type="importmap">
            {
                "imports": {
                    "underscore": "https://unpkg.com/underscore@1.13.6/underscore-esm-min.js",
                    "wontache": "https://unpkg.com/wontache@0.2.0/mustache-esm.js"
                }
            }
        </script>


    </head>

    <body id="body">

        <div id="app" />
        <div id="app2" />
        <div id="app3" />

        <script type="module">

            import mustache from 'wontache';

            var namedTemplates = {
                link: '<a href="{{&url}}">{{title}}</a>',
                img: '<img src="{{&url}}" width="50" height="50">{{title}}</img>'
            }

            const template = `
                {{#items}}
                    foo
                    <ul>
                    {{#.}}
                        <li>
                            {{>*type}}
                        </li>
                    {{/.}}
                    </ul>  
                {{/items}}`

            const data = {
                items: [
                    [
                        { name: 'Alice', url: 'http://www.orf.at', title: 'orf', type: 'link' },
                        { name: 'Bob', url: 'https://www.w3schools.com/html/img_girl.jpg', title: 'bob', type: 'img' },
                    ],
                    [
                        { name: 'Alice', url: 'http://www.orf.at', title: 'orf', type: 'link' },
                        { name: 'Bob', url: 'https://www.w3schools.com/html/img_girl.jpg', title: 'bob', type: 'img' },
                    ]
                ],
            };

            const renderFn = mustache(template);
            let output = renderFn(data, { partials: namedTemplates });
            document.getElementById('app2').innerHTML = output

        </script>
    </body>

</html>